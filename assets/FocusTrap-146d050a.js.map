{"version":3,"file":"FocusTrap-146d050a.js","sources":["../../node_modules/@mantine/hooks/esm/use-focus-return/use-focus-return.js","../../node_modules/@mantine/hooks/esm/use-focus-trap/tabbable.js","../../node_modules/@mantine/hooks/esm/use-focus-trap/scope-tab.js","../../node_modules/@mantine/hooks/esm/use-focus-trap/create-aria-hider.js","../../node_modules/@mantine/hooks/esm/use-focus-trap/use-focus-trap.js","../../node_modules/@mantine/core/esm/FocusTrap/FocusTrap.js"],"sourcesContent":["import { useRef } from 'react';\nimport { useDidUpdate } from '../use-did-update/use-did-update.js';\n\nfunction useFocusReturn({ opened, shouldReturnFocus = true }) {\n  const lastActiveElement = useRef();\n  const returnFocus = () => {\n    var _a;\n    if (lastActiveElement.current && \"focus\" in lastActiveElement.current && typeof lastActiveElement.current.focus === \"function\") {\n      (_a = lastActiveElement.current) == null ? void 0 : _a.focus({ preventScroll: true });\n    }\n  };\n  useDidUpdate(() => {\n    let timeout = -1;\n    const clearFocusTimeout = (event) => {\n      if (event.key === \"Tab\") {\n        window.clearTimeout(timeout);\n      }\n    };\n    document.addEventListener(\"keydown\", clearFocusTimeout);\n    if (opened) {\n      lastActiveElement.current = document.activeElement;\n    } else if (shouldReturnFocus) {\n      timeout = window.setTimeout(returnFocus, 10);\n    }\n    return () => {\n      window.clearTimeout(timeout);\n      document.removeEventListener(\"keydown\", clearFocusTimeout);\n    };\n  }, [opened, shouldReturnFocus]);\n  return returnFocus;\n}\n\nexport { useFocusReturn };\n//# sourceMappingURL=use-focus-return.js.map\n","const TABBABLE_NODES = /input|select|textarea|button|object/;\nconst FOCUS_SELECTOR = \"a, input, select, textarea, button, object, [tabindex]\";\nfunction hidden(element) {\n  if (process.env.NODE_ENV === \"test\") {\n    return false;\n  }\n  return element.style.display === \"none\";\n}\nfunction visible(element) {\n  const isHidden = element.getAttribute(\"aria-hidden\") || element.getAttribute(\"hidden\") || element.getAttribute(\"type\") === \"hidden\";\n  if (isHidden) {\n    return false;\n  }\n  let parentElement = element;\n  while (parentElement) {\n    if (parentElement === document.body || parentElement.nodeType === 11) {\n      break;\n    }\n    if (hidden(parentElement)) {\n      return false;\n    }\n    parentElement = parentElement.parentNode;\n  }\n  return true;\n}\nfunction getElementTabIndex(element) {\n  let tabIndex = element.getAttribute(\"tabindex\");\n  if (tabIndex === null) {\n    tabIndex = void 0;\n  }\n  return parseInt(tabIndex, 10);\n}\nfunction focusable(element) {\n  const nodeName = element.nodeName.toLowerCase();\n  const isTabIndexNotNaN = !Number.isNaN(getElementTabIndex(element));\n  const res = TABBABLE_NODES.test(nodeName) && !element.disabled || (element instanceof HTMLAnchorElement ? element.href || isTabIndexNotNaN : isTabIndexNotNaN);\n  return res && visible(element);\n}\nfunction tabbable(element) {\n  const tabIndex = getElementTabIndex(element);\n  const isTabIndexNaN = Number.isNaN(tabIndex);\n  return (isTabIndexNaN || tabIndex >= 0) && focusable(element);\n}\nfunction findTabbableDescendants(element) {\n  return Array.from(element.querySelectorAll(FOCUS_SELECTOR)).filter(tabbable);\n}\n\nexport { FOCUS_SELECTOR, findTabbableDescendants, focusable, tabbable };\n//# sourceMappingURL=tabbable.js.map\n","import { findTabbableDescendants } from './tabbable.js';\n\nfunction scopeTab(node, event) {\n  const tabbable = findTabbableDescendants(node);\n  if (!tabbable.length) {\n    event.preventDefault();\n    return;\n  }\n  const finalTabbable = tabbable[event.shiftKey ? 0 : tabbable.length - 1];\n  const root = node.getRootNode();\n  const leavingFinalTabbable = finalTabbable === root.activeElement || node === root.activeElement;\n  if (!leavingFinalTabbable) {\n    return;\n  }\n  event.preventDefault();\n  const target = tabbable[event.shiftKey ? tabbable.length - 1 : 0];\n  if (target) {\n    target.focus();\n  }\n}\n\nexport { scopeTab };\n//# sourceMappingURL=scope-tab.js.map\n","import { randomId } from '../utils/random-id/random-id.js';\n\nfunction createAriaHider(containerNode, selector = \"body > :not(script)\") {\n  const id = randomId();\n  const rootNodes = Array.from(document.querySelectorAll(selector)).map((node) => {\n    var _a;\n    if (((_a = node == null ? void 0 : node.shadowRoot) == null ? void 0 : _a.contains(containerNode)) || node.contains(containerNode)) {\n      return void 0;\n    }\n    const ariaHidden = node.getAttribute(\"aria-hidden\");\n    const prevAriaHidden = node.getAttribute(\"data-hidden\");\n    const prevFocusId = node.getAttribute(\"data-focus-id\");\n    node.setAttribute(\"data-focus-id\", id);\n    if (ariaHidden === null || ariaHidden === \"false\") {\n      node.setAttribute(\"aria-hidden\", \"true\");\n    } else if (!prevAriaHidden && !prevFocusId) {\n      node.setAttribute(\"data-hidden\", ariaHidden);\n    }\n    return {\n      node,\n      ariaHidden: prevAriaHidden || null\n    };\n  });\n  return () => {\n    rootNodes.forEach((item) => {\n      if (!item || id !== item.node.getAttribute(\"data-focus-id\")) {\n        return;\n      }\n      if (item.ariaHidden === null) {\n        item.node.removeAttribute(\"aria-hidden\");\n      } else {\n        item.node.setAttribute(\"aria-hidden\", item.ariaHidden);\n      }\n      item.node.removeAttribute(\"data-focus-id\");\n      item.node.removeAttribute(\"data-hidden\");\n    });\n  };\n}\n\nexport { createAriaHider };\n//# sourceMappingURL=create-aria-hider.js.map\n","import { useRef, useCallback, useEffect } from 'react';\nimport { FOCUS_SELECTOR, tabbable, focusable } from './tabbable.js';\nimport { scopeTab } from './scope-tab.js';\nimport { createAriaHider } from './create-aria-hider.js';\n\nfunction useFocusTrap(active = true) {\n  const ref = useRef();\n  const restoreAria = useRef(null);\n  const focusNode = (node) => {\n    let focusElement = node.querySelector(\"[data-autofocus]\");\n    if (!focusElement) {\n      const children = Array.from(node.querySelectorAll(FOCUS_SELECTOR));\n      focusElement = children.find(tabbable) || children.find(focusable) || null;\n      if (!focusElement && focusable(node))\n        focusElement = node;\n    }\n    if (focusElement) {\n      focusElement.focus({ preventScroll: true });\n    } else if (process.env.NODE_ENV === \"development\") {\n      console.warn(\"[@mantine/hooks/use-focus-trap] Failed to find focusable element within provided node\", node);\n    }\n  };\n  const setRef = useCallback((node) => {\n    if (!active) {\n      return;\n    }\n    if (node === null) {\n      if (restoreAria.current) {\n        restoreAria.current();\n        restoreAria.current = null;\n      }\n      return;\n    }\n    restoreAria.current = createAriaHider(node);\n    if (ref.current === node) {\n      return;\n    }\n    if (node) {\n      setTimeout(() => {\n        if (node.getRootNode()) {\n          focusNode(node);\n        } else if (process.env.NODE_ENV === \"development\") {\n          console.warn(\"[@mantine/hooks/use-focus-trap] Ref node is not part of the dom\", node);\n        }\n      });\n      ref.current = node;\n    } else {\n      ref.current = null;\n    }\n  }, [active]);\n  useEffect(() => {\n    if (!active) {\n      return void 0;\n    }\n    ref.current && setTimeout(() => focusNode(ref.current));\n    const handleKeyDown = (event) => {\n      if (event.key === \"Tab\" && ref.current) {\n        scopeTab(ref.current, event);\n      }\n    };\n    document.addEventListener(\"keydown\", handleKeyDown);\n    return () => {\n      document.removeEventListener(\"keydown\", handleKeyDown);\n      if (restoreAria.current) {\n        restoreAria.current();\n      }\n    };\n  }, [active]);\n  return setRef;\n}\n\nexport { useFocusTrap };\n//# sourceMappingURL=use-focus-trap.js.map\n","import { cloneElement } from 'react';\nimport { isElement } from '@mantine/utils';\nimport { useFocusTrap, useMergedRef } from '@mantine/hooks';\n\nfunction FocusTrap({\n  children,\n  active = true,\n  refProp = \"ref\"\n}) {\n  const focusTrapRef = useFocusTrap(active);\n  const ref = useMergedRef(focusTrapRef, children == null ? void 0 : children.ref);\n  if (!isElement(children)) {\n    return children;\n  }\n  return cloneElement(children, { [refProp]: ref });\n}\nFocusTrap.displayName = \"@mantine/core/FocusTrap\";\n\nexport { FocusTrap };\n//# sourceMappingURL=FocusTrap.js.map\n"],"names":["useFocusReturn","opened","shouldReturnFocus","lastActiveElement","useRef","returnFocus","_a","useDidUpdate","timeout","clearFocusTimeout","event","TABBABLE_NODES","FOCUS_SELECTOR","hidden","element","visible","parentElement","getElementTabIndex","tabIndex","focusable","nodeName","isTabIndexNotNaN","tabbable","findTabbableDescendants","scopeTab","node","finalTabbable","root","target","createAriaHider","containerNode","selector","id","randomId","rootNodes","ariaHidden","prevAriaHidden","prevFocusId","item","useFocusTrap","active","ref","restoreAria","focusNode","focusElement","children","setRef","useCallback","useEffect","handleKeyDown","FocusTrap","refProp","focusTrapRef","useMergedRef","isElement","cloneElement"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5]}